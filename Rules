#!/usr/bin/env ruby

compile '/' do
  layout 'home'
end

compile '/articles/json/' do
  filter :erb
end
compile '/technical/articles/json/' do
  filter :erb
end
compile '/personal/articles/json/' do
  filter :erb
end

compile '/articles/' do
  filter :erb
  layout 'articles'
end
compile '/articles/page/' do
  filter :erb
  layout 'articles'
end
compile '/technical/articles/' do
  filter :erb
  layout 'articles'
end
compile '/technical/articles/page/' do
  filter :erb
  layout 'articles'
end
compile '/personal/articles/' do
  filter :erb
  layout 'articles'
end
compile '/personal/articles/page/' do
  filter :erb
  layout 'articles'
end

compile '*' do
  filter :rdiscount
  layout 'default'
end

route '/articles/json/' do
  item.identifier + 'articles.json'
end
route '/technical/articles/json/' do
  item.identifier + 'articles.json'
end
route '/personal/articles/json/' do
  item.identifier + 'articles.json'
end

route '*' do
  item.identifier + 'index.html'
end

layout '*', :erb
